(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{82:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return a})),n.d(t,"metadata",(function(){return s})),n.d(t,"rightToc",(function(){return l})),n.d(t,"default",(function(){return d}));var r=n(2),i=n(6),o=(n(0),n(89));n(105),n(86),n(64);var a={id:"tuto_strategies",title:"Faire une strat\xe9gie"},s={unversionedId:"tutoriel/tuto_strategies",id:"tutoriel/tuto_strategies",isDocsHomePage:!1,title:"Faire une strat\xe9gie",description:"Proc\xe9dures",source:"@site/docs/tutoriel/strategies.md",slug:"/tutoriel/tuto_strategies",permalink:"/club-innovation-ssl/docs/tutoriel/tuto_strategies",editUrl:"https://github.com/EtienneSchmitz/club-innovation-ssl/tree/master/docs/tutoriel/strategies.md",version:"current",sidebar:"someSidebar",previous:{title:"Technique",permalink:"/club-innovation-ssl/docs/introduction/tech"}},l=[{value:"Proc\xe9dures",id:"proc\xe9dures",children:[]},{value:"Exemple",id:"exemple",children:[{value:"Commande en vitesse du robot.",id:"commande-en-vitesse-du-robot",children:[]}]}],c={rightToc:l};function d(e){var t=e.components,n=Object(i.a)(e,["components"]);return Object(o.b)("wrapper",Object(r.a)({},c,n,{components:t,mdxType:"MDXLayout"}),Object(o.b)("h2",{id:"proc\xe9dures"},"Proc\xe9dures"),Object(o.b)("ol",null,Object(o.b)("li",{parentName:"ol"},Object(o.b)("p",{parentName:"li"},"Dans le dossier ",Object(o.b)("inlineCode",{parentName:"p"},"src/controllers/strategies")," du service MSB, dupliquer le fichier ",Object(o.b)("inlineCode",{parentName:"p"},"template.ts")," et renommer le avec le nom de votre strat\xe9gie.")),Object(o.b)("li",{parentName:"ol"},Object(o.b)("p",{parentName:"li"},"Renommer la classe. N'oubliez pas de modifier l'initialisation dans la fonction ",Object(o.b)("inlineCode",{parentName:"p"},"handler")," de la d\xe9claration.")),Object(o.b)("li",{parentName:"ol"},Object(o.b)("p",{parentName:"li"},"Modifier la fonction compute en fonction de vos besoins.")),Object(o.b)("li",{parentName:"ol"},Object(o.b)("p",{parentName:"li"},"Enregistrer la strat\xe9gie dans le fichier ",Object(o.b)("inlineCode",{parentName:"p"},"index.ts")," du dossier."))),Object(o.b)("h2",{id:"exemple"},"Exemple"),Object(o.b)("h3",{id:"commande-en-vitesse-du-robot"},"Commande en vitesse du robot."),Object(o.b)("pre",null,Object(o.b)("code",Object(r.a)({parentName:"pre"},{className:"language-typescript",metastring:'title="/src/controllers/strategies/turn.ts"',title:'"/src/controllers/strategies/turn.ts"'}),"\nimport { ActionSchema, Context, ServiceBroker } from 'moleculer'\nimport { Control } from '@ssl/types/internal/control/'\nimport Strategies from '@ssl/types/internal/task-manager/tasks/strategies'\n\nimport { state } from '../../models/GameState'\n\nexport default class Turn extends Strategies {\n  name = 'turn';\n\n  public constructor(public id: number) {\n    super()\n  }\n\n  public static declaration: ActionSchema = {\n    params: {\n      id: {\n        type: 'number', min: 0, max: 15,\n      },\n    },\n    handler(ctx: Context<{ id: number }>): void {\n      state.assign.register([ctx.params.id], new Turn(ctx.params.id))\n    },\n  }\n\n  compute(broker: ServiceBroker): boolean {\n    // const robot = state.data.robots.allies[this.id]\n\n    void broker.call('bots-gateway.control', {\n      id: this.id,\n      yellow: true,\n      velocity:\n      {\n        normal: 0,\n        angular: 0.2,\n        tangent: 0,\n      },\n    } as Control)\n\n    return false\n  }\n}\n")))}d.isMDXComponent=!0}}]);